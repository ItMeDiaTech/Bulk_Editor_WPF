<Window x:Class="BulkEditor.UI.Views.SettingsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d"
        Title="Settings - Bulk Document Editor"
        Height="600" Width="800"
        WindowStartupLocation="CenterOwner"
        ResizeMode="CanResize"
        MinHeight="500" MinWidth="700">

    <Window.Resources>
        <BooleanToVisibilityConverter x:Key="BoolToVisibilityConverter"/>
        <Style TargetType="GroupBox">
            <Setter Property="Margin" Value="8"/>
            <Setter Property="Padding" Value="12"/>
            <Setter Property="BorderBrush" Value="#E0E0E0"/>
            <Setter Property="BorderThickness" Value="1"/>
        </Style>
        <Style TargetType="TextBlock" x:Key="SectionHeader">
            <Setter Property="FontSize" Value="16"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Margin" Value="0,0,0,8"/>
            <Setter Property="Foreground" Value="#2196F3"/>
        </Style>
    </Window.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Settings Content -->
        <TabControl Grid.Row="0" Margin="16">

            <!-- Processing Settings -->
            <TabItem Header="Processing">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel Margin="16">

                        <!-- Concurrency Settings -->
                        <GroupBox Header="Concurrency">
                            <StackPanel>
                                <Grid Margin="0,0,0,8">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Text="Maximum Concurrent Documents:" VerticalAlignment="Center"/>
                                    <StackPanel Grid.Column="1" Orientation="Horizontal">
                                        <Slider Name="MaxConcurrentSlider"
                                                Value="{Binding MaxConcurrentDocuments}"
                                                Minimum="1" Maximum="50"
                                                Width="150"
                                                TickFrequency="5"
                                                IsSnapToTickEnabled="True"/>
                                        <TextBlock Text="{Binding ElementName=MaxConcurrentSlider, Path=Value}"
                                                   Margin="8,0,0,0"
                                                   VerticalAlignment="Center"
                                                   MinWidth="30"/>
                                    </StackPanel>
                                </Grid>

                                <Grid Margin="0,0,0,8">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Text="Batch Size:" VerticalAlignment="Center"/>
                                    <StackPanel Grid.Column="1" Orientation="Horizontal">
                                        <Slider Name="BatchSizeSlider"
                                                Value="{Binding BatchSize}"
                                                Minimum="10" Maximum="500"
                                                Width="150"
                                                TickFrequency="50"
                                                IsSnapToTickEnabled="True"/>
                                        <TextBlock Text="{Binding ElementName=BatchSizeSlider, Path=Value}"
                                                   Margin="8,0,0,0"
                                                   VerticalAlignment="Center"
                                                   MinWidth="30"/>
                                    </StackPanel>
                                </Grid>
                            </StackPanel>
                        </GroupBox>

                        <!-- Processing Options -->
                        <GroupBox Header="Processing Options">
                            <StackPanel>
                                <CheckBox Content="Create backup before processing"
                                          IsChecked="{Binding CreateBackupBeforeProcessing}"
                                          Margin="0,0,0,8"/>
                                <CheckBox Content="Validate hyperlinks"
                                          IsChecked="{Binding ValidateHyperlinks}"
                                          Margin="0,0,0,8"/>
                                <CheckBox Content="Update hyperlinks automatically"
                                          IsChecked="{Binding UpdateHyperlinks}"
                                          Margin="0,0,0,8"/>
                                <CheckBox Content="Add Content IDs"
                                          IsChecked="{Binding AddContentIds}"
                                          Margin="0,0,0,8"/>
                                <CheckBox Content="Optimize text formatting"
                                          IsChecked="{Binding OptimizeText}"
                                          Margin="0,0,0,8"/>
                            </StackPanel>
                        </GroupBox>

                        <!-- Timeout Settings -->
                        <GroupBox Header="Timeout Settings">
                            <StackPanel>
                                <Grid Margin="0,0,0,8">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="150"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Text="Timeout per document (minutes):" VerticalAlignment="Center"/>
                                    <TextBox Grid.Column="1" Text="{Binding TimeoutPerDocumentMinutes}"
                                             HorizontalAlignment="Stretch"/>
                                </Grid>
                            </StackPanel>
                        </GroupBox>

                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <!-- Validation Settings -->
            <TabItem Header="Validation">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel Margin="16">

                        <GroupBox Header="HTTP Settings">
                            <StackPanel>
                                <Grid Margin="0,0,0,8">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="150"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Text="HTTP Timeout (seconds):" VerticalAlignment="Center"/>
                                    <TextBox Grid.Column="1" Text="{Binding HttpTimeoutSeconds}"
                                             HorizontalAlignment="Stretch"/>
                                </Grid>

                                <Grid Margin="0,0,0,8">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="150"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Text="Max Retry Attempts:" VerticalAlignment="Center"/>
                                    <TextBox Grid.Column="1" Text="{Binding MaxRetryAttempts}"
                                             HorizontalAlignment="Stretch"/>
                                </Grid>

                                <Grid Margin="0,0,0,8">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="150"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Text="Retry Delay (seconds):" VerticalAlignment="Center"/>
                                    <TextBox Grid.Column="1" Text="{Binding RetryDelaySeconds}"
                                             HorizontalAlignment="Stretch"/>
                                </Grid>

                                <Grid Margin="0,0,0,8">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="300"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Text="User Agent:" VerticalAlignment="Center"/>
                                    <TextBox Grid.Column="1" Text="{Binding UserAgent}"
                                             HorizontalAlignment="Stretch"/>
                                </Grid>
                            </StackPanel>
                        </GroupBox>

                        <!-- API Configuration -->
                        <GroupBox Header="API Configuration">
                            <StackPanel>
                                <Grid Margin="0,0,0,8">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="300"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Text="API Base URL:" VerticalAlignment="Center"/>
                                    <TextBox Grid.Column="1" Text="{Binding ApiBaseUrl}"
                                             HorizontalAlignment="Stretch" Margin="0,0,8,0"
                                             ToolTip="Enter API URL or 'Test' for test mode"/>
                                    <Button Grid.Column="2" Content="Test Connection"
                                            Command="{Binding TestApiConnectionCommand}"
                                            Padding="12,4"/>
                                </Grid>

                                <Grid Margin="0,0,0,8">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="300"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Text="API Key:" VerticalAlignment="Center"/>
                                    <TextBox Grid.Column="1" Text="{Binding ApiKey}"
                                             HorizontalAlignment="Stretch"/>
                                </Grid>

                                <Grid Margin="0,0,0,8">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="150"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Text="API Timeout (seconds):" VerticalAlignment="Center"/>
                                    <TextBox Grid.Column="1" Text="{Binding ApiTimeoutSeconds}"
                                             HorizontalAlignment="Stretch"/>
                                </Grid>

                                <CheckBox Content="Enable API response caching"
                                          IsChecked="{Binding EnableApiCaching}"
                                          Margin="0,0,0,8"/>

                                <Grid Margin="0,0,0,8" IsEnabled="{Binding EnableApiCaching}">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="150"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Text="Cache expiry (hours):" VerticalAlignment="Center"/>
                                    <TextBox Grid.Column="1" Text="{Binding ApiCacheExpiryHours}"
                                             HorizontalAlignment="Stretch"/>
                                </Grid>

                                <TextBlock Text="Note: Enter 'Test' as API URL to use test mode with mock data."
                                           FontStyle="Italic"
                                           Foreground="Gray"
                                           FontSize="11"
                                           Margin="0,4,0,0"/>
                            </StackPanel>
                        </GroupBox>

                        <GroupBox Header="Validation Options">
                            <StackPanel>
                                <CheckBox Content="Check for expired content"
                                          IsChecked="{Binding CheckExpiredContent}"
                                          Margin="0,0,0,8"/>
                                <CheckBox Content="Follow redirects"
                                          IsChecked="{Binding FollowRedirects}"
                                          Margin="0,0,0,8"/>
                                <CheckBox Content="Auto-replace titles with API response"
                                          IsChecked="{Binding AutoReplaceTitles}"
                                          Margin="0,0,0,8"/>
                                <CheckBox Content="Report title differences in changelog"
                                          IsChecked="{Binding ReportTitleDifferences}"
                                          Margin="0,0,0,8"/>
                            </StackPanel>
                        </GroupBox>

                        <GroupBox Header="Lookup Pattern">
                            <StackPanel>
                                <TextBlock Text="Lookup ID Pattern (Regex):" Margin="0,0,0,4"/>
                                <TextBox Text="{Binding LookupIdPattern}"
                                         FontFamily="Consolas"
                                         Margin="0,0,0,8"/>
                                <TextBlock Text="Example: (TSRC-[^-]+-[0-9]{6}|CMS-[^-]+-[0-9]{6})"
                                           FontStyle="Italic"
                                           Foreground="Gray"
                                           FontSize="12"/>
                            </StackPanel>
                        </GroupBox>

                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <!-- Backup Settings -->
            <TabItem Header="Backup">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel Margin="16">

                        <GroupBox Header="Backup Configuration">
                            <StackPanel>
                                <Grid Margin="0,0,0,8">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="200"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Text="Backup Directory:" VerticalAlignment="Center"/>
                                    <TextBox Grid.Column="1" Text="{Binding BackupDirectory}"
                                             HorizontalAlignment="Stretch" Margin="0,0,8,0"/>
                                    <Button Grid.Column="2" Content="Browse..."
                                            Command="{Binding BrowseBackupDirectoryCommand}"
                                            Padding="12,4"/>
                                </Grid>

                                <CheckBox Content="Create timestamped backups"
                                          IsChecked="{Binding CreateTimestampedBackups}"
                                          Margin="0,0,0,8"/>
                                <CheckBox Content="Compress backups"
                                          IsChecked="{Binding CompressBackups}"
                                          Margin="0,0,0,8"/>
                                <CheckBox Content="Auto cleanup old backups"
                                          IsChecked="{Binding AutoCleanupOldBackups}"
                                          Margin="0,0,0,8"/>

                                <Grid Margin="0,0,0,8">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="150"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Text="Max backup age (days):" VerticalAlignment="Center"/>
                                    <TextBox Grid.Column="1" Text="{Binding MaxBackupAge}"
                                             HorizontalAlignment="Stretch"/>
                                </Grid>
                            </StackPanel>
                        </GroupBox>

                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <!-- Logging Settings -->
            <TabItem Header="Logging">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel Margin="16">

                        <GroupBox Header="Logging Configuration">
                            <StackPanel>
                                <Grid Margin="0,0,0,8">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="150"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Text="Log Level:" VerticalAlignment="Center"/>
                                    <ComboBox Grid.Column="1" SelectedItem="{Binding LogLevel}">
                                        <ComboBoxItem Content="Verbose"/>
                                        <ComboBoxItem Content="Debug"/>
                                        <ComboBoxItem Content="Information"/>
                                        <ComboBoxItem Content="Warning"/>
                                        <ComboBoxItem Content="Error"/>
                                        <ComboBoxItem Content="Fatal"/>
                                    </ComboBox>
                                </Grid>

                                <Grid Margin="0,0,0,8">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="200"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Text="Log Directory:" VerticalAlignment="Center"/>
                                    <TextBox Grid.Column="1" Text="{Binding LogDirectory}"
                                             HorizontalAlignment="Stretch" Margin="0,0,8,0"/>
                                    <Button Grid.Column="2" Content="Browse..."
                                            Command="{Binding BrowseLogDirectoryCommand}"
                                            Padding="12,4"/>
                                </Grid>

                                <CheckBox Content="Enable file logging"
                                          IsChecked="{Binding EnableFileLogging}"
                                          Margin="0,0,0,8"/>
                                <CheckBox Content="Enable console logging"
                                          IsChecked="{Binding EnableConsoleLogging}"
                                          Margin="0,0,0,8"/>

                                <Grid Margin="0,0,0,8">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="150"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Text="Max log file size (MB):" VerticalAlignment="Center"/>
                                    <TextBox Grid.Column="1" Text="{Binding MaxLogFileSizeMB}"
                                             HorizontalAlignment="Stretch"/>
                                </Grid>

                                <Grid Margin="0,0,0,8">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="150"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Text="Max log files:" VerticalAlignment="Center"/>
                                    <TextBox Grid.Column="1" Text="{Binding MaxLogFiles}"
                                             HorizontalAlignment="Stretch"/>
                                </Grid>
                            </StackPanel>
                        </GroupBox>

                        <GroupBox Header="Log Management">
                            <StackPanel>
                                <Grid Margin="0,0,0,8">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Text="View application logs for troubleshooting and monitoring."
                                               VerticalAlignment="Center"/>
                                    <Button Grid.Column="1" Content="Open Logs Folder"
                                            Command="{Binding OpenLogsFolderCommand}"
                                            Padding="12,6"
                                            Margin="8,0,0,0"/>
                                </Grid>
                            </StackPanel>
                        </GroupBox>

                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <!-- Replacement Settings -->
            <TabItem Header="Replacement">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel Margin="16">

                        <!-- Hyperlink Replacement -->
                        <GroupBox Header="Hyperlink Replacement">
                            <StackPanel>
                                <CheckBox Content="Enable hyperlink replacement"
                                          IsChecked="{Binding EnableHyperlinkReplacement}"
                                          Margin="0,0,0,8"/>

                                <Grid Margin="0,0,0,8">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="150"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Text="Max replacement rules:" VerticalAlignment="Center"/>
                                    <TextBox Grid.Column="1" Text="{Binding MaxReplacementRules}"
                                             HorizontalAlignment="Stretch"/>
                                </Grid>

                                <CheckBox Content="Validate Content IDs"
                                          IsChecked="{Binding ValidateContentIds}"
                                          Margin="0,0,0,12"/>

                                <StackPanel IsEnabled="{Binding EnableHyperlinkReplacement}">
                                    <Grid Margin="0,0,0,8">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Text="Hyperlink Rules:" FontWeight="SemiBold" VerticalAlignment="Center"/>
                                        <Button Grid.Column="1" Content="Add Rule"
                                                Command="{Binding AddHyperlinkRuleCommand}"
                                                Margin="8,0,8,0" Padding="8,4"/>
                                        <Button Grid.Column="2" Content="Clear Invalid"
                                                Command="{Binding ClearInvalidRulesCommand}"
                                                Padding="8,4"/>
                                    </Grid>

                                    <DataGrid ItemsSource="{Binding HyperlinkRules}"
                                              AutoGenerateColumns="False"
                                              CanUserAddRows="False"
                                              CanUserDeleteRows="True"
                                              Height="200"
                                              Margin="0,0,0,8">
                                        <DataGrid.Columns>
                                            <DataGridCheckBoxColumn Header="Enabled"
                                                                    Binding="{Binding IsEnabled}"
                                                                    Width="80"/>
                                            <DataGridTextColumn Header="Title to Match"
                                                                Binding="{Binding TitleToMatch}"
                                                                Width="*"/>
                                            <DataGridTextColumn Header="Content ID"
                                                                Binding="{Binding ContentId}"
                                                                Width="120"/>
                                            <DataGridTemplateColumn Header="Actions" Width="80">
                                                <DataGridTemplateColumn.CellTemplate>
                                                    <DataTemplate>
                                                        <Button Content="Remove"
                                                                Command="{Binding DataContext.RemoveHyperlinkRuleCommand, RelativeSource={RelativeSource AncestorType=DataGrid}}"
                                                                CommandParameter="{Binding}"
                                                                Padding="4,2"
                                                                FontSize="10"/>
                                                    </DataTemplate>
                                                </DataGridTemplateColumn.CellTemplate>
                                            </DataGridTemplateColumn>
                                        </DataGrid.Columns>
                                    </DataGrid>
                                </StackPanel>
                            </StackPanel>
                        </GroupBox>

                        <!-- Text Replacement -->
                        <GroupBox Header="Text Replacement">
                            <StackPanel>
                                <CheckBox Content="Enable text replacement"
                                          IsChecked="{Binding EnableTextReplacement}"
                                          Margin="0,0,0,12"/>

                                <StackPanel IsEnabled="{Binding EnableTextReplacement}">
                                    <Grid Margin="0,0,0,8">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Text="Text Rules:" FontWeight="SemiBold" VerticalAlignment="Center"/>
                                        <Button Grid.Column="1" Content="Add Rule"
                                                Command="{Binding AddTextRuleCommand}"
                                                Margin="8,0,0,0" Padding="8,4"/>
                                    </Grid>

                                    <DataGrid ItemsSource="{Binding TextRules}"
                                              AutoGenerateColumns="False"
                                              CanUserAddRows="False"
                                              CanUserDeleteRows="True"
                                              Height="200"
                                              Margin="0,0,0,8">
                                        <DataGrid.Columns>
                                            <DataGridCheckBoxColumn Header="Enabled"
                                                                    Binding="{Binding IsEnabled}"
                                                                    Width="80"/>
                                            <DataGridTextColumn Header="Source Text"
                                                                Binding="{Binding SourceText}"
                                                                Width="*"/>
                                            <DataGridTextColumn Header="Replacement Text"
                                                                Binding="{Binding ReplacementText}"
                                                                Width="*"/>
                                            <DataGridTemplateColumn Header="Actions" Width="80">
                                                <DataGridTemplateColumn.CellTemplate>
                                                    <DataTemplate>
                                                        <Button Content="Remove"
                                                                Command="{Binding DataContext.RemoveTextRuleCommand, RelativeSource={RelativeSource AncestorType=DataGrid}}"
                                                                CommandParameter="{Binding}"
                                                                Padding="4,2"
                                                                FontSize="10"/>
                                                    </DataTemplate>
                                                </DataGridTemplateColumn.CellTemplate>
                                            </DataGridTemplateColumn>
                                        </DataGrid.Columns>
                                    </DataGrid>

                                    <TextBlock Text="Note: Text replacement uses case-insensitive matching but preserves your capitalization in the replacement text."
                                               FontStyle="Italic"
                                               Foreground="Gray"
                                               FontSize="11"
                                               Margin="0,4,0,0"/>
                                </StackPanel>
                            </StackPanel>
                        </GroupBox>

                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <!-- Update Settings -->
            <TabItem Header="Updates">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel Margin="16">

                        <GroupBox Header="Auto-Update Configuration">
                            <StackPanel>
                                <CheckBox Content="Enable automatic updates"
                                          IsChecked="{Binding AutoUpdateEnabled}"
                                          Margin="0,0,0,8"/>

                                <Grid Margin="0,0,0,8" IsEnabled="{Binding AutoUpdateEnabled}">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="150"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Text="Check for updates every (hours):" VerticalAlignment="Center"/>
                                    <TextBox Grid.Column="1" Text="{Binding CheckIntervalHours}"
                                             HorizontalAlignment="Stretch"/>
                                </Grid>

                                <CheckBox Content="Install security updates automatically"
                                          IsChecked="{Binding InstallSecurityUpdatesAutomatically}"
                                          IsEnabled="{Binding AutoUpdateEnabled}"
                                          Margin="0,0,0,8"/>

                                <CheckBox Content="Notify when updates are available"
                                          IsChecked="{Binding NotifyOnUpdatesAvailable}"
                                          IsEnabled="{Binding AutoUpdateEnabled}"
                                          Margin="0,0,0,8"/>

                                <CheckBox Content="Create backup before updating"
                                          IsChecked="{Binding CreateBackupBeforeUpdate}"
                                          IsEnabled="{Binding AutoUpdateEnabled}"
                                          Margin="0,0,0,8"/>

                                <CheckBox Content="Include pre-release versions"
                                          IsChecked="{Binding IncludePrerelease}"
                                          IsEnabled="{Binding AutoUpdateEnabled}"
                                          Margin="0,0,0,8"/>
                            </StackPanel>
                        </GroupBox>

                        <GroupBox Header="Update Source">
                            <StackPanel>
                                <Grid Margin="0,0,0,8">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="200"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Text="GitHub Owner:" VerticalAlignment="Center"/>
                                    <TextBox Grid.Column="1" Text="{Binding GitHubOwner}"
                                             HorizontalAlignment="Stretch"/>
                                </Grid>

                                <Grid Margin="0,0,0,8">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="200"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Text="GitHub Repository:" VerticalAlignment="Center"/>
                                    <TextBox Grid.Column="1" Text="{Binding GitHubRepository}"
                                             HorizontalAlignment="Stretch"/>
                                </Grid>

                                <TextBlock Text="Updates are downloaded from GitHub releases. Ensure the repository information is correct."
                                           FontStyle="Italic"
                                           Foreground="Gray"
                                           FontSize="11"
                                           Margin="0,4,0,0"/>
                            </StackPanel>
                        </GroupBox>

                        <GroupBox Header="Manual Update Check">
                            <StackPanel>
                                <Grid Margin="0,0,0,8">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Text="Current Version: " VerticalAlignment="Center"/>
                                    <TextBlock Grid.Column="1" Text="{Binding CurrentVersion}"
                                               FontWeight="SemiBold" VerticalAlignment="Center"/>
                                </Grid>

                                <Grid Margin="0,0,0,8" Visibility="{Binding UpdateAvailable, Converter={StaticResource BoolToVisibilityConverter}}">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Text="Latest Version: " VerticalAlignment="Center"/>
                                    <TextBlock Grid.Column="1" Text="{Binding LatestVersion}"
                                               FontWeight="SemiBold" VerticalAlignment="Center"
                                               Foreground="Green"/>
                                </Grid>

                                <Button Content="Check for Updates"
                                        Command="{Binding CheckForUpdatesCommand}"
                                        HorizontalAlignment="Left"
                                        Padding="16,8"
                                        Margin="0,0,0,8"/>

                                <TextBlock Text="{Binding UpdateCheckStatus}"
                                           FontSize="11"
                                           Foreground="Gray"
                                           Margin="0,0,0,8"
                                           TextWrapping="Wrap"/>

                                <ScrollViewer MaxHeight="100"
                                              VerticalScrollBarVisibility="Auto"
                                              Visibility="{Binding UpdateAvailable, Converter={StaticResource BoolToVisibilityConverter}}">
                                    <TextBlock Text="{Binding ReleaseNotes}"
                                               FontSize="11"
                                               Foreground="DarkBlue"
                                               TextWrapping="Wrap"
                                               Margin="0,4,0,0"/>
                                </ScrollViewer>
                            </StackPanel>
                        </GroupBox>

                        <GroupBox Header="Troubleshooting">
                            <StackPanel>
                                <Grid Margin="0,0,0,8">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Text="Access application logs for troubleshooting and monitoring."
                                               VerticalAlignment="Center"/>
                                    <Button Grid.Column="1" Content="Open Logs Folder"
                                            Command="{Binding OpenLogsFolderCommand}"
                                            Padding="12,6"
                                            Margin="8,0,0,0"/>
                                </Grid>
                            </StackPanel>
                        </GroupBox>

                    </StackPanel>
                </ScrollViewer>
            </TabItem>

        </TabControl>

        <!-- Action Buttons -->
        <Border Grid.Row="1" Background="#F5F5F5" Padding="16,12">
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                <Button Content="Reset to Defaults"
                        Command="{Binding ResetToDefaultsCommand}"
                        Margin="0,0,8,0"
                        Padding="16,8"/>
                <Button Content="Cancel"
                        Command="{Binding CancelCommand}"
                        Margin="0,0,8,0"
                        Padding="16,8"/>
                <Button Content="Save Settings"
                        Command="{Binding SaveSettingsCommand}"
                        Background="#2196F3"
                        Foreground="White"
                        Padding="16,8"/>
            </StackPanel>
        </Border>

    </Grid>
</Window>