<UserControl x:Class="BulkEditor.UI.Views.Settings.ThemeSettingsView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
             mc:Ignorable="d" 
             d:DesignHeight="600" d:DesignWidth="800"
             TextElement.Foreground="{DynamicResource OnSurfaceBrush}"
             TextElement.FontWeight="{DynamicResource BodyFontWeight}"
             TextElement.FontSize="{DynamicResource BodyFontSize}"
             TextElement.FontFamily="{DynamicResource AppFontFamily}">

    <ScrollViewer VerticalScrollBarVisibility="Auto" 
                  materialDesign:ScrollViewerAssist.IsAutoHideEnabled="True">
        <StackPanel Margin="{DynamicResource LargeSpacing}">

            <!-- Theme Overview Card -->
            <materialDesign:Card Style="{StaticResource ModernCardStyle}" 
                               Margin="0,0,0,{DynamicResource LargeSpacing}">
                <StackPanel>
                    <TextBlock Text="Theme Configuration"
                             Style="{StaticResource SectionHeaderStyle}"/>
                    <TextBlock Text="Customize the appearance and behavior of the application interface"
                             Style="{StaticResource BodyTextStyle}"
                             Margin="0,0,0,{DynamicResource LargeSpacing}"/>

                    <!-- Quick Theme Toggle -->
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        
                        <TextBlock Grid.Column="0" 
                                 Text="Dark Mode"
                                 Style="{StaticResource BodyTextStyle}"
                                 VerticalAlignment="Center"/>
                        <ToggleButton Grid.Column="1"
                                    IsChecked="{Binding BaseTheme, Converter={StaticResource StringToBoolConverter}, ConverterParameter=Dark}"
                                    Style="{StaticResource MaterialDesignSwitchToggleButton}"
                                    Command="{Binding ToggleBaseThemeCommand}"/>
                    </Grid>
                </StackPanel>
            </materialDesign:Card>

            <!-- Base Theme Settings -->
            <Expander Header="Base Theme" 
                    IsExpanded="True"
                    Style="{StaticResource MaterialDesignExpander}"
                    Margin="0,0,0,{DynamicResource LargeSpacing}">
                <materialDesign:Card Margin="0,{DynamicResource MediumSpacing},0,0">
                    <StackPanel Margin="{DynamicResource ContentPadding}">
                        
                        <!-- Theme Selection -->
                        <TextBlock Text="Theme Mode"
                                 Style="{StaticResource SubtitleTextStyle}"
                                 Margin="0,0,0,{DynamicResource MediumSpacing}"/>
                        <ComboBox ItemsSource="{Binding AvailableThemes}"
                                SelectedItem="{Binding BaseTheme}"
                                Style="{StaticResource MaterialDesignComboBox}"
                                materialDesign:HintAssist.Hint="Select theme mode"
                                Margin="0,0,0,{DynamicResource LargeSpacing}"/>

                        <!-- System Theme Integration -->
                        <CheckBox Content="Use system theme settings"
                                IsChecked="{Binding UseSystemTheme}"
                                Style="{StaticResource MaterialDesignCheckBox}"
                                Margin="0,0,0,{DynamicResource MediumSpacing}"/>

                        <!-- Material Design Toggle -->
                        <CheckBox Content="Enable Material Design"
                                IsChecked="{Binding EnableMaterialDesign}"
                                Style="{StaticResource MaterialDesignCheckBox}"/>
                    </StackPanel>
                </materialDesign:Card>
            </Expander>

            <!-- Color Palette -->
            <Expander Header="Color Palette" 
                    IsExpanded="True"
                    Style="{StaticResource MaterialDesignExpander}"
                    Margin="0,0,0,{DynamicResource LargeSpacing}">
                <materialDesign:Card Margin="0,{DynamicResource MediumSpacing},0,0">
                    <Grid Margin="{DynamicResource ContentPadding}">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <!-- Primary Colors -->
                        <StackPanel Grid.Row="0" Grid.Column="0" 
                                  Margin="0,0,{DynamicResource MediumSpacing},0">
                            <TextBlock Text="Primary Color"
                                     Style="{StaticResource SubtitleTextStyle}"
                                     Margin="0,0,0,{DynamicResource MediumSpacing}"/>
                            <ComboBox ItemsSource="{Binding PrimaryColors}"
                                    SelectedValue="{Binding PrimaryColor}"
                                    SelectedValuePath="Value"
                                    DisplayMemberPath="Name"
                                    Style="{StaticResource MaterialDesignComboBox}"
                                    materialDesign:HintAssist.Hint="Primary color"/>
                            <Border Background="{Binding PrimaryColor}"
                                  Height="20"
                                  CornerRadius="4"
                                  Margin="0,{DynamicResource SmallSpacing},0,0"/>
                        </StackPanel>

                        <!-- Secondary Colors -->
                        <StackPanel Grid.Row="0" Grid.Column="1">
                            <TextBlock Text="Secondary Color"
                                     Style="{StaticResource SubtitleTextStyle}"
                                     Margin="0,0,0,{DynamicResource MediumSpacing}"/>
                            <ComboBox ItemsSource="{Binding SecondaryColors}"
                                    SelectedValue="{Binding SecondaryColor}"
                                    SelectedValuePath="Value"
                                    DisplayMemberPath="Name"
                                    Style="{StaticResource MaterialDesignComboBox}"
                                    materialDesign:HintAssist.Hint="Secondary color"/>
                            <Border Background="{Binding SecondaryColor}"
                                  Height="20"
                                  CornerRadius="4"
                                  Margin="0,{DynamicResource SmallSpacing},0,0"/>
                        </StackPanel>

                        <!-- Surface Colors -->
                        <StackPanel Grid.Row="1" Grid.Column="0" 
                                  Margin="0,{DynamicResource LargeSpacing},{DynamicResource MediumSpacing},0">
                            <TextBlock Text="Background Color"
                                     Style="{StaticResource SubtitleTextStyle}"
                                     Margin="0,0,0,{DynamicResource MediumSpacing}"/>
                            <TextBox Text="{Binding BackgroundColor}"
                                   Style="{StaticResource MaterialDesignOutlinedTextBox}"
                                   materialDesign:HintAssist.Hint="#RRGGBB"/>
                            <Border Background="{Binding BackgroundColor}"
                                  Height="20"
                                  CornerRadius="4"
                                  Margin="0,{DynamicResource SmallSpacing},0,0"/>
                        </StackPanel>

                        <StackPanel Grid.Row="1" Grid.Column="1" 
                                  Margin="0,{DynamicResource LargeSpacing},0,0">
                            <TextBlock Text="Surface Color"
                                     Style="{StaticResource SubtitleTextStyle}"
                                     Margin="0,0,0,{DynamicResource MediumSpacing}"/>
                            <TextBox Text="{Binding SurfaceColor}"
                                   Style="{StaticResource MaterialDesignOutlinedTextBox}"
                                   materialDesign:HintAssist.Hint="#RRGGBB"/>
                            <Border Background="{Binding SurfaceColor}"
                                  Height="20"
                                  CornerRadius="4"
                                  Margin="0,{DynamicResource SmallSpacing},0,0"/>
                        </StackPanel>

                        <!-- State Colors -->
                        <StackPanel Grid.Row="2" Grid.ColumnSpan="2" 
                                  Margin="0,{DynamicResource LargeSpacing},0,0">
                            <TextBlock Text="State Colors"
                                     Style="{StaticResource SubtitleTextStyle}"
                                     Margin="0,0,0,{DynamicResource MediumSpacing}"/>
                            <UniformGrid Columns="4">
                                <StackPanel Margin="0,0,{DynamicResource MediumSpacing},0">
                                    <TextBlock Text="Success" Style="{StaticResource CaptionTextStyle}"/>
                                    <TextBox Text="{Binding SuccessColor}" 
                                           Style="{StaticResource MaterialDesignOutlinedTextBox}"/>
                                    <Border Background="{Binding SuccessColor}" Height="16" CornerRadius="2" 
                                          Margin="0,{DynamicResource SmallSpacing},0,0"/>
                                </StackPanel>
                                <StackPanel Margin="0,0,{DynamicResource MediumSpacing},0">
                                    <TextBlock Text="Warning" Style="{StaticResource CaptionTextStyle}"/>
                                    <TextBox Text="{Binding WarningColor}" 
                                           Style="{StaticResource MaterialDesignOutlinedTextBox}"/>
                                    <Border Background="{Binding WarningColor}" Height="16" CornerRadius="2" 
                                          Margin="0,{DynamicResource SmallSpacing},0,0"/>
                                </StackPanel>
                                <StackPanel Margin="0,0,{DynamicResource MediumSpacing},0">
                                    <TextBlock Text="Error" Style="{StaticResource CaptionTextStyle}"/>
                                    <TextBox Text="{Binding ErrorColor}" 
                                           Style="{StaticResource MaterialDesignOutlinedTextBox}"/>
                                    <Border Background="{Binding ErrorColor}" Height="16" CornerRadius="2" 
                                          Margin="0,{DynamicResource SmallSpacing},0,0"/>
                                </StackPanel>
                                <StackPanel>
                                    <TextBlock Text="Info" Style="{StaticResource CaptionTextStyle}"/>
                                    <TextBox Text="{Binding InfoColor}" 
                                           Style="{StaticResource MaterialDesignOutlinedTextBox}"/>
                                    <Border Background="{Binding InfoColor}" Height="16" CornerRadius="2" 
                                          Margin="0,{DynamicResource SmallSpacing},0,0"/>
                                </StackPanel>
                            </UniformGrid>
                        </StackPanel>
                    </Grid>
                </materialDesign:Card>
            </Expander>

            <!-- Typography -->
            <Expander Header="Typography" 
                    IsExpanded="False"
                    Style="{StaticResource MaterialDesignExpander}"
                    Margin="0,0,0,{DynamicResource LargeSpacing}">
                <materialDesign:Card Margin="0,{DynamicResource MediumSpacing},0,0">
                    <Grid Margin="{DynamicResource ContentPadding}">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <StackPanel Grid.Column="0" 
                                  Margin="0,0,{DynamicResource MediumSpacing},0">
                            <TextBlock Text="Font Family"
                                     Style="{StaticResource SubtitleTextStyle}"
                                     Margin="0,0,0,{DynamicResource MediumSpacing}"/>
                            <ComboBox ItemsSource="{Binding AvailableFonts}"
                                    SelectedItem="{Binding FontFamily}"
                                    Style="{StaticResource MaterialDesignComboBox}"
                                    materialDesign:HintAssist.Hint="Select font family"/>
                        </StackPanel>

                        <StackPanel Grid.Column="1">
                            <TextBlock Text="Font Size Scale"
                                     Style="{StaticResource SubtitleTextStyle}"
                                     Margin="0,0,0,{DynamicResource MediumSpacing}"/>
                            <Slider Value="{Binding FontSizeScale}"
                                  Minimum="0.8"
                                  Maximum="1.5"
                                  TickFrequency="0.1"
                                  IsSnapToTickEnabled="True"
                                  Style="{StaticResource MaterialDesignSlider}"/>
                            <TextBlock Text="{Binding FontSizeScale, StringFormat='{}{0:F1}x'}"
                                     Style="{StaticResource CaptionTextStyle}"
                                     HorizontalAlignment="Center"/>
                        </StackPanel>
                    </Grid>
                </materialDesign:Card>
            </Expander>

            <!-- Layout and Spacing -->
            <Expander Header="Layout &amp; Spacing" 
                    IsExpanded="False"
                    Style="{StaticResource MaterialDesignExpander}"
                    Margin="0,0,0,{DynamicResource LargeSpacing}">
                <materialDesign:Card Margin="0,{DynamicResource MediumSpacing},0,0">
                    <UniformGrid Columns="3" Margin="{DynamicResource ContentPadding}">
                        <StackPanel Margin="0,0,{DynamicResource MediumSpacing},0">
                            <TextBlock Text="Base Spacing"
                                     Style="{StaticResource SubtitleTextStyle}"
                                     Margin="0,0,0,{DynamicResource MediumSpacing}"/>
                            <Slider Value="{Binding BaseSpacing}"
                                  Minimum="4"
                                  Maximum="16"
                                  TickFrequency="2"
                                  IsSnapToTickEnabled="True"
                                  Style="{StaticResource MaterialDesignSlider}"/>
                            <TextBlock Text="{Binding BaseSpacing, StringFormat='{}{0}dp'}"
                                     Style="{StaticResource CaptionTextStyle}"
                                     HorizontalAlignment="Center"/>
                        </StackPanel>

                        <StackPanel Margin="0,0,{DynamicResource MediumSpacing},0">
                            <TextBlock Text="Corner Radius"
                                     Style="{StaticResource SubtitleTextStyle}"
                                     Margin="0,0,0,{DynamicResource MediumSpacing}"/>
                            <Slider Value="{Binding CornerRadius}"
                                  Minimum="0"
                                  Maximum="20"
                                  TickFrequency="2"
                                  IsSnapToTickEnabled="True"
                                  Style="{StaticResource MaterialDesignSlider}"/>
                            <TextBlock Text="{Binding CornerRadius, StringFormat='{}{0}px'}"
                                     Style="{StaticResource CaptionTextStyle}"
                                     HorizontalAlignment="Center"/>
                        </StackPanel>

                        <StackPanel>
                            <TextBlock Text="Density"
                                     Style="{StaticResource SubtitleTextStyle}"
                                     Margin="0,0,0,{DynamicResource MediumSpacing}"/>
                            <ComboBox ItemsSource="{Binding AvailableDensities}"
                                    SelectedItem="{Binding Density}"
                                    Style="{StaticResource MaterialDesignComboBox}"/>
                        </StackPanel>
                    </UniformGrid>
                </materialDesign:Card>
            </Expander>

            <!-- Visual Effects -->
            <Expander Header="Visual Effects" 
                    IsExpanded="False"
                    Style="{StaticResource MaterialDesignExpander}"
                    Margin="0,0,0,{DynamicResource LargeSpacing}">
                <materialDesign:Card Margin="0,{DynamicResource MediumSpacing},0,0">
                    <StackPanel Margin="{DynamicResource ContentPadding}">
                        <CheckBox Content="Enable shadows and elevation"
                                IsChecked="{Binding EnableShadows}"
                                Style="{StaticResource MaterialDesignCheckBox}"
                                Margin="0,0,0,{DynamicResource MediumSpacing}"/>
                        
                        <CheckBox Content="Enable animations and transitions"
                                IsChecked="{Binding EnableAnimations}"
                                Style="{StaticResource MaterialDesignCheckBox}"
                                Margin="0,0,0,{DynamicResource MediumSpacing}"/>
                        
                        <CheckBox Content="Enable ripple effects"
                                IsChecked="{Binding EnableRipple}"
                                Style="{StaticResource MaterialDesignCheckBox}"
                                Margin="0,0,0,{DynamicResource LargeSpacing}"/>

                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            
                            <TextBlock Grid.Column="0"
                                     Text="Animation Speed"
                                     Style="{StaticResource BodyTextStyle}"
                                     VerticalAlignment="Center"
                                     Margin="0,0,{DynamicResource LargeSpacing},0"/>
                            
                            <Slider Grid.Column="1"
                                  Value="{Binding AnimationSpeed}"
                                  Minimum="0.5"
                                  Maximum="2.0"
                                  TickFrequency="0.1"
                                  IsSnapToTickEnabled="True"
                                  Style="{StaticResource MaterialDesignSlider}"
                                  IsEnabled="{Binding EnableAnimations}"/>
                            
                            <TextBlock Grid.Column="2"
                                     Text="{Binding AnimationSpeed, StringFormat='{}{0:F1}x'}"
                                     Style="{StaticResource CaptionTextStyle}"
                                     VerticalAlignment="Center"
                                     Margin="8,0,0,0"/>
                        </Grid>
                    </StackPanel>
                </materialDesign:Card>
            </Expander>

            <!-- Theme Actions -->
            <materialDesign:Card Style="{StaticResource ModernCardStyle}">
                <StackPanel>
                    <TextBlock Text="Theme Actions"
                             Style="{StaticResource SectionHeaderStyle}"/>
                    
                    <StackPanel Orientation="Horizontal" 
                              HorizontalAlignment="Center">
                        <Button Content="RESET TO DEFAULTS"
                              Command="{Binding ResetToDefaultsCommand}"
                              Style="{StaticResource SecondaryButtonStyle}"
                              Margin="0,0,{DynamicResource MediumSpacing},0"/>
                        
                        <Button Content="ARCTIC"
                              Command="{Binding ApplyColorPresetCommand}"
                              CommandParameter="Arctic"
                              Style="{StaticResource TextButtonStyle}"
                              Margin="0,0,{DynamicResource MediumSpacing},0"/>
                        
                        <Button Content="SUNSET"
                              Command="{Binding ApplyColorPresetCommand}"
                              CommandParameter="Sunset"
                              Style="{StaticResource TextButtonStyle}"
                              Margin="0,0,{DynamicResource MediumSpacing},0"/>
                        
                        <Button Content="FOREST"
                              Command="{Binding ApplyColorPresetCommand}"
                              CommandParameter="Forest"
                              Style="{StaticResource TextButtonStyle}"
                              Margin="0,0,{DynamicResource MediumSpacing},0"/>
                        
                        <Button Content="CORPORATE"
                              Command="{Binding ApplyColorPresetCommand}"
                              CommandParameter="Corporate"
                              Style="{StaticResource TextButtonStyle}"/>
                    </StackPanel>
                </StackPanel>
            </materialDesign:Card>

        </StackPanel>
    </ScrollViewer>
</UserControl>