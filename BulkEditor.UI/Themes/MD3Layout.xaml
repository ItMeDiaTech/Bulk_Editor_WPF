<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <!-- Material Design 3 Layout System -->
    <!-- Based on MD3 layout guidelines: https://m3.material.io/foundations/layout/understanding-layout/overview -->

    <!-- MD3 Responsive Breakpoints (from MD3Spacing.xaml) -->
    <!-- Mobile: 600dp, Tablet: 1240dp, Desktop: 1440dp -->

    <!-- MD3 Container Styles -->
    <Style x:Key="MD3ContainerStyle" TargetType="{x:Type Border}">
        <Setter Property="Background" Value="{DynamicResource BackgroundBrush}"/>
        <Setter Property="UseLayoutRounding" Value="True"/>
        <Setter Property="SnapsToDevicePixels" Value="True"/>
    </Style>

    <!-- MD3 Surface Container -->
    <Style x:Key="MD3SurfaceContainerStyle" TargetType="{x:Type Border}" BasedOn="{StaticResource MD3ContainerStyle}">
        <Setter Property="Background" Value="{DynamicResource SurfaceBrush}"/>
        <Setter Property="CornerRadius" Value="{StaticResource MediumCornerRadius}"/>
        <Setter Property="Padding" Value="{StaticResource MediumSpacing}"/>
    </Style>

    <!-- MD3 Section Container -->
    <Style x:Key="MD3SectionStyle" TargetType="{x:Type Border}" BasedOn="{StaticResource MD3SurfaceContainerStyle}">
        <Setter Property="Margin" Value="{StaticResource SectionMargin}"/>
        <Setter Property="Padding" Value="{StaticResource SectionPadding}"/>
    </Style>

    <!-- MD3 Grid System Styles -->
    
    <!-- Main Grid Container -->
    <Style x:Key="MD3GridContainerStyle" TargetType="{x:Type Grid}">
        <Setter Property="UseLayoutRounding" Value="True"/>
        <Setter Property="SnapsToDevicePixels" Value="True"/>
    </Style>

    <!-- Responsive Grid with Auto-sizing Columns -->
    <Style x:Key="MD3ResponsiveGridStyle" TargetType="{x:Type UniformGrid}">
        <Setter Property="UseLayoutRounding" Value="True"/>
        <Setter Property="SnapsToDevicePixels" Value="True"/>
        <!-- Default: 2 column layout for desktop -->
        <Setter Property="Columns" Value="2"/>
    </Style>

    <!-- MD3 Adaptive Card Grid -->
    <Style x:Key="MD3CardGridStyle" TargetType="{x:Type ItemsControl}">
        <Setter Property="UseLayoutRounding" Value="True"/>
        <Setter Property="SnapsToDevicePixels" Value="True"/>
        <Setter Property="ItemsPanel">
            <Setter.Value>
                <ItemsPanelTemplate>
                    <UniformGrid Style="{StaticResource MD3ResponsiveGridStyle}"/>
                </ItemsPanelTemplate>
            </Setter.Value>
        </Setter>
        <Setter Property="ItemContainerStyle">
            <Setter.Value>
                <Style TargetType="{x:Type ContentPresenter}">
                    <Setter Property="Margin" Value="{StaticResource CardMargin}"/>
                </Style>
            </Setter.Value>
        </Setter>
    </Style>

    <!-- MD3 Flex Layout Styles -->
    
    <!-- Horizontal Stack -->
    <Style x:Key="MD3HorizontalStackStyle" TargetType="{x:Type StackPanel}">
        <Setter Property="Orientation" Value="Horizontal"/>
        <Setter Property="UseLayoutRounding" Value="True"/>
        <Setter Property="SnapsToDevicePixels" Value="True"/>
    </Style>

    <!-- Vertical Stack -->
    <Style x:Key="MD3VerticalStackStyle" TargetType="{x:Type StackPanel}">
        <Setter Property="Orientation" Value="Vertical"/>
        <Setter Property="UseLayoutRounding" Value="True"/>
        <Setter Property="SnapsToDevicePixels" Value="True"/>
    </Style>

    <!-- Wrap Panel for Responsive Content -->
    <Style x:Key="MD3WrapStyle" TargetType="{x:Type WrapPanel}">
        <Setter Property="UseLayoutRounding" Value="True"/>
        <Setter Property="SnapsToDevicePixels" Value="True"/>
        <Setter Property="ItemWidth" Value="{StaticResource DocumentCardMinWidth}"/>
        <Setter Property="ItemHeight" Value="{StaticResource DocumentCardHeight}"/>
    </Style>

    <!-- MD3 Content Area Styles -->
    
    <!-- Main Content Area -->
    <Style x:Key="MD3MainContentStyle" TargetType="{x:Type Border}" BasedOn="{StaticResource MD3ContainerStyle}">
        <Setter Property="Padding" Value="{StaticResource ContentPadding}"/>
        <Setter Property="Background" Value="{DynamicResource BackgroundBrush}"/>
    </Style>

    <!-- Side Panel Content -->
    <Style x:Key="MD3SidePanelStyle" TargetType="{x:Type Border}" BasedOn="{StaticResource MD3SurfaceContainerStyle}">
        <Setter Property="MinWidth" Value="280"/>
        <Setter Property="MaxWidth" Value="400"/>
        <Setter Property="BorderBrush" Value="{DynamicResource OutlineVariantBrush}"/>
        <Setter Property="BorderThickness" Value="{StaticResource ThinBorder}"/>
        <Setter Property="Effect">
            <Setter.Value>
                <DropShadowEffect Color="Black" Opacity="0.08" BlurRadius="8" ShadowDepth="2"/>
            </Setter.Value>
        </Setter>
    </Style>

    <!-- Header Area -->
    <Style x:Key="MD3HeaderStyle" TargetType="{x:Type Border}" BasedOn="{StaticResource MD3SurfaceContainerStyle}">
        <Setter Property="Background" Value="{DynamicResource SurfaceBrush}"/>
        <Setter Property="BorderBrush" Value="{DynamicResource OutlineVariantBrush}"/>
        <Setter Property="BorderThickness" Value="0,0,0,1"/>
        <Setter Property="CornerRadius" Value="0"/>
        <Setter Property="Padding" Value="{StaticResource SectionPadding}"/>
        <Setter Property="Effect">
            <Setter.Value>
                <DropShadowEffect Color="Black" Opacity="0.04" BlurRadius="2" ShadowDepth="1"/>
            </Setter.Value>
        </Setter>
    </Style>

    <!-- Footer Area -->
    <Style x:Key="MD3FooterStyle" TargetType="{x:Type Border}" BasedOn="{StaticResource MD3SurfaceContainerStyle}">
        <Setter Property="Background" Value="{DynamicResource SurfaceBrush}"/>
        <Setter Property="BorderBrush" Value="{DynamicResource OutlineVariantBrush}"/>
        <Setter Property="BorderThickness" Value="0,1,0,0"/>
        <Setter Property="CornerRadius" Value="0"/>
        <Setter Property="Padding" Value="{StaticResource MediumSpacing}"/>
    </Style>

    <!-- MD3 Layout Templates -->
    
    <!-- Standard Page Layout Template -->
    <ControlTemplate x:Key="MD3PageLayoutTemplate">
        <Grid Style="{StaticResource MD3GridContainerStyle}">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>  <!-- Header -->
                <RowDefinition Height="*"/>     <!-- Content -->
                <RowDefinition Height="Auto"/>  <!-- Footer -->
            </Grid.RowDefinitions>
            
            <!-- Header -->
            <Border Grid.Row="0" Style="{StaticResource MD3HeaderStyle}">
                <ContentPresenter ContentSource="Header"/>
            </Border>
            
            <!-- Main Content -->
            <Border Grid.Row="1" Style="{StaticResource MD3MainContentStyle}">
                <ContentPresenter ContentSource="Content"/>
            </Border>
            
            <!-- Footer -->
            <Border Grid.Row="2" Style="{StaticResource MD3FooterStyle}">
                <ContentPresenter ContentSource="Footer"/>
            </Border>
        </Grid>
    </ControlTemplate>

    <!-- Master-Detail Layout Template -->
    <ControlTemplate x:Key="MD3MasterDetailLayoutTemplate">
        <Grid Style="{StaticResource MD3GridContainerStyle}">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>  <!-- Header -->
                <RowDefinition Height="*"/>     <!-- Content -->
            </Grid.RowDefinitions>
            
            <!-- Header -->
            <Border Grid.Row="0" Style="{StaticResource MD3HeaderStyle}">
                <ContentPresenter ContentSource="Header"/>
            </Border>
            
            <!-- Master-Detail Content -->
            <Grid Grid.Row="1">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>  <!-- Master -->
                    <ColumnDefinition Width="*"/>     <!-- Detail -->
                </Grid.ColumnDefinitions>
                
                <!-- Master Panel -->
                <Border Grid.Column="0" Style="{StaticResource MD3SidePanelStyle}">
                    <ContentPresenter ContentSource="Master"/>
                </Border>
                
                <!-- Detail Content -->
                <Border Grid.Column="1" Style="{StaticResource MD3MainContentStyle}">
                    <ContentPresenter ContentSource="Detail"/>
                </Border>
            </Grid>
        </Grid>
    </ControlTemplate>

    <!-- MD3 Responsive Layout Behaviors -->
    
    <!-- Adaptive Margin Behavior -->
    <Style x:Key="MD3AdaptiveMarginsStyle" TargetType="{x:Type FrameworkElement}">
        <Setter Property="UseLayoutRounding" Value="True"/>
        <Setter Property="Margin" Value="{StaticResource MediumSpacing}"/>
    </Style>

    <!-- Adaptive Padding Behavior -->
    <Style x:Key="MD3AdaptivePaddingStyle" TargetType="{x:Type Border}">
        <Setter Property="UseLayoutRounding" Value="True"/>
        <Setter Property="Padding" Value="{StaticResource MediumSpacing}"/>
    </Style>

    <!-- MD3 Dialog and Modal Styles -->
    
    <!-- Dialog Container -->
    <Style x:Key="MD3DialogStyle" TargetType="{x:Type Border}">
        <Setter Property="Background" Value="{DynamicResource SurfaceBrush}"/>
        <Setter Property="BorderBrush" Value="{DynamicResource OutlineBrush}"/>
        <Setter Property="BorderThickness" Value="{StaticResource ThinBorder}"/>
        <Setter Property="CornerRadius" Value="{StaticResource ExtraLargeCornerRadius}"/>
        <Setter Property="Padding" Value="{StaticResource SectionPadding}"/>
        <Setter Property="MinWidth" Value="320"/>
        <Setter Property="MaxWidth" Value="560"/>
        <Setter Property="UseLayoutRounding" Value="True"/>
        <Setter Property="Effect">
            <Setter.Value>
                <DropShadowEffect Color="Black" Opacity="0.24" BlurRadius="24" ShadowDepth="8"/>
            </Setter.Value>
        </Setter>
    </Style>

    <!-- Modal Overlay -->
    <Style x:Key="MD3ModalOverlayStyle" TargetType="{x:Type Border}">
        <Setter Property="Background">
            <Setter.Value>
                <SolidColorBrush Color="Black" Opacity="0.32"/>
            </Setter.Value>
        </Setter>
        <Setter Property="UseLayoutRounding" Value="True"/>
    </Style>

    <!-- Legacy Compatibility Aliases -->
    <Style x:Key="ContainerStyle" TargetType="{x:Type Border}" BasedOn="{StaticResource MD3ContainerStyle}"/>
    <Style x:Key="SurfaceContainerStyle" TargetType="{x:Type Border}" BasedOn="{StaticResource MD3SurfaceContainerStyle}"/>
    <Style x:Key="SectionStyle" TargetType="{x:Type Border}" BasedOn="{StaticResource MD3SectionStyle}"/>
    <Style x:Key="GridContainerStyle" TargetType="{x:Type Grid}" BasedOn="{StaticResource MD3GridContainerStyle}"/>
    <Style x:Key="ResponsiveGridStyle" TargetType="{x:Type UniformGrid}" BasedOn="{StaticResource MD3ResponsiveGridStyle}"/>
    <Style x:Key="CardGridStyle" TargetType="{x:Type ItemsControl}" BasedOn="{StaticResource MD3CardGridStyle}"/>
    <Style x:Key="HorizontalStackStyle" TargetType="{x:Type StackPanel}" BasedOn="{StaticResource MD3HorizontalStackStyle}"/>
    <Style x:Key="VerticalStackStyle" TargetType="{x:Type StackPanel}" BasedOn="{StaticResource MD3VerticalStackStyle}"/>
    <Style x:Key="MainContentStyle" TargetType="{x:Type Border}" BasedOn="{StaticResource MD3MainContentStyle}"/>
    <Style x:Key="SidePanelStyle" TargetType="{x:Type Border}" BasedOn="{StaticResource MD3SidePanelStyle}"/>
    <Style x:Key="HeaderStyle" TargetType="{x:Type Border}" BasedOn="{StaticResource MD3HeaderStyle}"/>
    <Style x:Key="FooterStyle" TargetType="{x:Type Border}" BasedOn="{StaticResource MD3FooterStyle}"/>
    <Style x:Key="DialogStyle" TargetType="{x:Type Border}" BasedOn="{StaticResource MD3DialogStyle}"/>

</ResourceDictionary>